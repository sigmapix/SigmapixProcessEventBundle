{% extends 'SonataAdminBundle:CRUD:base_edit.html.twig' %}

{% block form %}
<script type="text/javascript">
    $(document).ready(function(){

        var $selectCentreGestion = jQuery('select[data-centre-gestion]');
        var $selectCentreGestionSpecifique = jQuery('select[data-centre-gestion-specifique]');

        var _c = function(selectedValue){
            $selectCentreGestionSpecifiqueContainer = $selectCentreGestionSpecifique.parent().parent();  
            if (selectedValue === String($selectCentreGestion.data('centre-gestion-specifique-target'))) {
                $selectCentreGestionSpecifiqueContainer.show();
            }
            else {
                $selectCentreGestionSpecifique.select2('data',null);
                $selectCentreGestionSpecifiqueContainer.hide();
            }
        }
        _c($selectCentreGestion.val());
        $selectCentreGestion.on("select2-selecting", function(e) {
            _c(e.val);
        });
    });
</script>
{{ parent() }}
{% endblock %}